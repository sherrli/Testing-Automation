from selenium.common.exceptions import NoSuchElementException
from selenium.common.exceptions import NoAlertPresentException
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import Select
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

import source_test

def links_test (firefox_driver, secondary_link_url):
	#replaced 'a' with secondary_link_url
    page_name = str(secondary_link_url.get_attribute('href'))
    # takes in a tuple
    myElem = WebDriverWait(firefox_driver, 10).until(EC.element_to_be_clickable((By.XPATH, "//a[@href]")))
    try:
    	# open link in new tab
        firefox_driver.find_element_by_tag_name('a').send_keys(Keys.COMMAND + 't')

        # firefox_driver.implicitly_wait(1)
        # secondary_link_url.click()

        if source_test.source_test(firefox_driver, "404") == 1:
            return page_name
        else:
            return "pass"
                
    except: # did not open
        return page_name
